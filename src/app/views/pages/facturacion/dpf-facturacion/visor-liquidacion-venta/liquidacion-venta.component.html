<div class="modal-title-inic mt-5" style="color:#00bcd4">Liquidación venta</div>
<div class="cli-content">
  <div class="cli-card-body">
    <!-- (click)="filtrar(this)" -->
    <!-- <input
      id="ckh2h"
      type="button"
      style="height: 0px; width: 0px; visibility: hidden"
    /><p *ngIf="!resultadoV"><em>Cargando...</em></p> -->

    <!-- <div class="row" style="justify-content: space-around">
      <div class="col-lg-6 col-12">
        <h3 style="font-size: 20px; font-weight: 500">Liquidación venta por estado</h3>
        <div class="chart-wrapper canvas">
          <canvas baseChart
          [data]="pieChartData"
          [labels]="pieChartLabels"
          [chartType]="pieChartType"
          [options]="pieChartOptions"
          [plugins]="pieChartPlugins"
          [legend]="pieChartLegend">
        </canvas>
        </div>
      </div>
      <div class="col-lg-6 col-12">
        <h3 style="font-size: 20px; font-weight: 500">Liquidación venta por Proyecto</h3>
        <div style="display: block" class="canvas">
          <canvas
            baseChart
            [datasets]="barChartData"
            [labels]="barChartLabels"
            [options]="barChartOptions"
            [plugins]="barChartPlugins"
            [legend]="barChartLegend"
            [chartType]="barChartType">
          </canvas>
        </div>
      </div>
    </div> -->

    <div class="card mt-4" style="padding: 10px">
      <div class="card-body p-0">
        <div class="table-responsive">
          <table mat-table [dataSource]="dataSource" class="table table-sm table-centered mb-0" style="font-size:small;">

            <ng-container matColumnDef="periodo">
              <th mat-header-cell *matHeaderCellDef> Periodo </th>
              <td mat-cell *matCellDef="let element"> <span> {{ element.periodo | date:'yyyy-MM'}}</span> </td>
              <td mat-footer-cell *matFooterCellDef>  </td>
            </ng-container>

            <ng-container matColumnDef="proyecto">
              <th mat-header-cell *matHeaderCellDef> Proyecto </th>
              <td mat-cell *matCellDef="let element"> {{element.proyecto}} </td>
              <td mat-footer-cell *matFooterCellDef>  </td>
            </ng-container>

            <ng-container matColumnDef="importe">
              <th mat-header-cell *matHeaderCellDef> Importe </th>
              <td mat-cell *matCellDef="let element" style="text-align: center;"> {{ element.importe | number:'3.2-2' }}</td>
              <td mat-footer-cell *matFooterCellDef style="text-align: center;"> {{total(1)| number:'3.2-2'}}</td>
            </ng-container>

            <ng-container matColumnDef="actas">
              <th mat-header-cell *matHeaderCellDef> Avance </th>
              <td mat-cell *matCellDef="let element">
                <div class="progress-group">
                  <!-- (click)="open(content,element.proyecto,element.periodo,'LI')" (contextmenu)="open(con  tent1,element.pr_id,element.tema)"  -->
                  <div class="progress progress-sm" title="Ver detalle">
                    <div class="progress-bar bg-cyan" [ngStyle]="{'width': (100*element.avance / element.actas ) + '%' }"></div>
                  </div>
                </div>
              </td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>

            <ng-container matColumnDef="avance">
              <th mat-header-cell *matHeaderCellDef> Detalle </th>
              <td style="text-align: center;" mat-cell *matCellDef="let element">
                <span ><b>{{( 100*element.avance / element.actas ).toFixed(1)}}<sup style="font-size: 10px">%</sup></b></span>
                ( {{ element.avance }}/{{ element.actas }} )
              </td>
              <td mat-footer-cell *matFooterCellDef style="text-align: center;"> TOTAL </td>
            </ng-container>

            <ng-container matColumnDef="venta_declarada">
              <th mat-header-cell *matHeaderCellDef> Declarado </th>
              <td mat-cell *matCellDef="let element" style="text-align: center;">
                <!-- <a (click)="open(content1,element.proyecto,element.periodo,'VD')" > -->
                  {{ element.venta_declarada | number:'3.2-2' }}
                <!-- </a> -->
              </td>
              <td mat-footer-cell *matFooterCellDef style="text-align: center;"> {{total(2)| number:'3.2-2'}}</td>
            </ng-container>

            <ng-container matColumnDef="facturado">
              <th mat-header-cell *matHeaderCellDef> Facturado </th>
              <td mat-cell *matCellDef="let element" style="text-align: center;">
                <!-- <a (click)="open(content1,element.proyecto,element.periodo,'FC')" > -->
                  {{ element.facturado | number:'3.2-2' }}
                <!-- </a> -->
                 </td>
              <td mat-footer-cell *matFooterCellDef style="text-align: center;"> {{total(3)| number:'3.2-2'}}</td>
            </ng-container>

            <ng-container matColumnDef="certificado">
              <th mat-header-cell *matHeaderCellDef> Certificado </th>
              <td mat-cell *matCellDef="let element" style="text-align: center;">
                <!-- <a (click)="open(content1,element.proyecto,element.periodo,'CR')" > -->
                  {{ element.certificado | number:'3.2-2' }}
                <!-- </a> -->
                 </td>
              <td mat-footer-cell *matFooterCellDef style="text-align: center;"> {{total(4)| number:'3.2-2'}}</td>
            </ng-container>

            <tr mat-header-row style="text-align: center;" *matHeaderRowDef="displayedColumns; "></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" ></tr>
            <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
          </table>
        </div>
      </div>

    </div>
  </div>
</div>
